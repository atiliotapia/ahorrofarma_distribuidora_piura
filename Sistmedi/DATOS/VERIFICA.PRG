SET ECHO OFF
SET TALK OFF
CLEA
SELE A
USE INICSUBA
SET ORDE TO CODIGO
SELE B
USE ACTUSUBA
SET ORDE TO CODIGO
SELE C
USE INGRSUBA
SET FILTE TO RECNO()>324
SELE D
USE INGRMEDI
SET FILTE TO RECNO()>1511
SELE A
GO TOP
DO WHILE !EOF()
   COD=CODIGO
   STT1=STOCK
   TOT1=TOTAL
   SELE B
   SEEK COD
   IF FOUN()
      STT4=STOCK
      TOT4=TOTAL
   ENDIF
   SELE C
   SUM ALL I_CANTIDAD TO STT2 FOR CODIGO=COD
   SUM ALL I_TOTAL TO TOT2 FOR CODIGO=COD
   SELE D
   SUM ALL I_CANTIDAD TO STT3 FOR CODIGO=COD
   SUM ALL I_TOTAL TO TOT3 FOR CODIGO=COD
   IF STT1+STT2-STT3!=STT4
      WAIT WIND "NO COINCIDEN "+COD+STR(STT1,12,2)+STR(STT2,12,2)+STR(STT3,12,2)+STR(STT4,12,2)
   ENDIF
   IF TOT1+TOT2-TOT3!=TOT4
      WAIT WIND "NO COINCIDEN "+COD+STR(TOT1,12,2)+STR(TOT2,12,2)+STR(TOT3,12,2)+STR(TOT4,12,2)
   ENDIF
   SELE A
   ?COD,STR(STT1,12,2),STR(STT2,12,2),STR(STT3,12,2),STR(STT4,12,2)
   SKIP
ENDDO














